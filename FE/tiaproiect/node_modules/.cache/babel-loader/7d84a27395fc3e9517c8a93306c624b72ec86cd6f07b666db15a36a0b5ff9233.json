{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marka\\\\OneDrive\\\\Desktop\\\\Facultate\\\\Master\\\\TIA\\\\ProiectSemestruTIA\\\\FE\\\\tiaproiect\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jwtDecode } from \"jwt-decode\";\nimport \"../styles/Profile.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [userInfo, setUserInfo] = useState(null);\n  const [reservations, setReservations] = useState([]);\n  const [error, setError] = useState(null);\n  const [userId, setUserId] = useState(null);\n  useEffect(() => {\n    const getUserIdFromToken = () => {\n      const token = localStorage.getItem(\"jwtToken\");\n      if (token) {\n        const decodedToken = jwtDecode(token);\n        setUserId(decodedToken.userId);\n      }\n    };\n    getUserIdFromToken();\n  }, []);\n  useEffect(() => {\n    if (userId) {\n      fetch(`http://localhost:8000/users/${userId}`).then(response => response.json()).then(data => setUserInfo(data)).catch(error => setError(error.message));\n      fetch(`http://localhost:8000/user/${userId}/reservations`).then(response => response.json()).then(data => setReservations(data)).catch(error => setError(error.message));\n    }\n  }, [userId]);\n  const handleDeleteReservation = async reservationId => {\n    try {\n      const response = await fetch(`http://localhost:8000/reservations/${reservationId}`, {\n        method: \"DELETE\"\n      });\n      if (response.ok) {\n        alert(\"Reservation deleted successfully!\");\n        setReservations(prevReservations => prevReservations.filter(reservation => reservation.id !== reservationId));\n      } else {\n        alert(\"Failed to delete reservation\");\n      }\n    } catch (error) {\n      alert(\"An error occurred while deleting the reservation\");\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: userInfo ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [userInfo.name, \"'s Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reservations-list\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Reservations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), reservations.length > 0 ? reservations.map(reservation => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reservation-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Swim ID: \", reservation.swimId, \" | \", reservation.startDate, \" -\", \" \", reservation.endDate]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-button\",\n            onClick: () => handleDeleteReservation(reservation.id),\n            children: \"Delete Reservation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 19\n          }, this)]\n        }, reservation.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You have no reservations yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading profile...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"UHlgwSPLge5X0Cv2ZMpQ8Wrg6kQ=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","jwtDecode","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","userInfo","setUserInfo","reservations","setReservations","error","setError","userId","setUserId","getUserIdFromToken","token","localStorage","getItem","decodedToken","fetch","then","response","json","data","catch","message","handleDeleteReservation","reservationId","method","ok","alert","prevReservations","filter","reservation","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","length","map","swimId","startDate","endDate","onClick","_c","$RefreshReg$"],"sources":["C:/Users/marka/OneDrive/Desktop/Facultate/Master/TIA/ProiectSemestruTIA/FE/tiaproiect/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport \"../styles/Profile.css\";\r\n\r\nconst Profile = () => {\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [reservations, setReservations] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const getUserIdFromToken = () => {\r\n      const token = localStorage.getItem(\"jwtToken\");\r\n      if (token) {\r\n        const decodedToken = jwtDecode(token);\r\n        setUserId(decodedToken.userId);\r\n      }\r\n    };\r\n\r\n    getUserIdFromToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      fetch(`http://localhost:8000/users/${userId}`)\r\n        .then((response) => response.json())\r\n        .then((data) => setUserInfo(data))\r\n        .catch((error) => setError(error.message));\r\n\r\n      fetch(`http://localhost:8000/user/${userId}/reservations`)\r\n        .then((response) => response.json())\r\n        .then((data) => setReservations(data))\r\n        .catch((error) => setError(error.message));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleDeleteReservation = async (reservationId) => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:8000/reservations/${reservationId}`,\r\n        {\r\n          method: \"DELETE\",\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        alert(\"Reservation deleted successfully!\");\r\n        setReservations((prevReservations) =>\r\n          prevReservations.filter(\r\n            (reservation) => reservation.id !== reservationId\r\n          )\r\n        );\r\n      } else {\r\n        alert(\"Failed to delete reservation\");\r\n      }\r\n    } catch (error) {\r\n      alert(\"An error occurred while deleting the reservation\");\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error-message\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      {userInfo ? (\r\n        <>\r\n          <div className=\"profile-header\">\r\n            <h1>{userInfo.name}'s Profile</h1>\r\n          </div>\r\n\r\n          <div className=\"reservations-list\">\r\n            <h2>Your Reservations</h2>\r\n            {reservations.length > 0 ? (\r\n              reservations.map((reservation) => (\r\n                <div key={reservation.id} className=\"reservation-item\">\r\n                  <p>\r\n                    Swim ID: {reservation.swimId} | {reservation.startDate} -{\" \"}\r\n                    {reservation.endDate}\r\n                  </p>\r\n                  <button\r\n                    className=\"delete-button\"\r\n                    onClick={() => handleDeleteReservation(reservation.id)}\r\n                  >\r\n                    Delete Reservation\r\n                  </button>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <p>You have no reservations yet.</p>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <p>Loading profile...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAO,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/B,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACd,MAAMiB,kBAAkB,GAAGA,CAAA,KAAM;MAC/B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAC9C,IAAIF,KAAK,EAAE;QACT,MAAMG,YAAY,GAAGnB,SAAS,CAACgB,KAAK,CAAC;QACrCF,SAAS,CAACK,YAAY,CAACN,MAAM,CAAC;MAChC;IACF,CAAC;IAEDE,kBAAkB,CAAC,CAAC;EACtB,CAAC,EAAE,EAAE,CAAC;EAENjB,SAAS,CAAC,MAAM;IACd,IAAIe,MAAM,EAAE;MACVO,KAAK,CAAC,+BAA+BP,MAAM,EAAE,CAAC,CAC3CQ,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAKhB,WAAW,CAACgB,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAEd,KAAK,IAAKC,QAAQ,CAACD,KAAK,CAACe,OAAO,CAAC,CAAC;MAE5CN,KAAK,CAAC,8BAA8BP,MAAM,eAAe,CAAC,CACvDQ,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAKd,eAAe,CAACc,IAAI,CAAC,CAAC,CACrCC,KAAK,CAAEd,KAAK,IAAKC,QAAQ,CAACD,KAAK,CAACe,OAAO,CAAC,CAAC;IAC9C;EACF,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZ,MAAMc,uBAAuB,GAAG,MAAOC,aAAa,IAAK;IACvD,IAAI;MACF,MAAMN,QAAQ,GAAG,MAAMF,KAAK,CAC1B,sCAAsCQ,aAAa,EAAE,EACrD;QACEC,MAAM,EAAE;MACV,CACF,CAAC;MAED,IAAIP,QAAQ,CAACQ,EAAE,EAAE;QACfC,KAAK,CAAC,mCAAmC,CAAC;QAC1CrB,eAAe,CAAEsB,gBAAgB,IAC/BA,gBAAgB,CAACC,MAAM,CACpBC,WAAW,IAAKA,WAAW,CAACC,EAAE,KAAKP,aACtC,CACF,CAAC;MACH,CAAC,MAAM;QACLG,KAAK,CAAC,8BAA8B,CAAC;MACvC;IACF,CAAC,CAAC,OAAOpB,KAAK,EAAE;MACdoB,KAAK,CAAC,kDAAkD,CAAC;IAC3D;EACF,CAAC;EAED,IAAIpB,KAAK,EAAE;IACT,oBAAOT,OAAA;MAAKkC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAE1B;IAAK;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EACrD;EAEA,oBACEvC,OAAA;IAAKkC,SAAS,EAAC,mBAAmB;IAAAC,QAAA,EAC/B9B,QAAQ,gBACPL,OAAA,CAAAE,SAAA;MAAAiC,QAAA,gBACEnC,OAAA;QAAKkC,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC7BnC,OAAA;UAAAmC,QAAA,GAAK9B,QAAQ,CAACmC,IAAI,EAAC,YAAU;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/B,CAAC,eAENvC,OAAA;QAAKkC,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChCnC,OAAA;UAAAmC,QAAA,EAAI;QAAiB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACzBhC,YAAY,CAACkC,MAAM,GAAG,CAAC,GACtBlC,YAAY,CAACmC,GAAG,CAAEV,WAAW,iBAC3BhC,OAAA;UAA0BkC,SAAS,EAAC,kBAAkB;UAAAC,QAAA,gBACpDnC,OAAA;YAAAmC,QAAA,GAAG,WACQ,EAACH,WAAW,CAACW,MAAM,EAAC,KAAG,EAACX,WAAW,CAACY,SAAS,EAAC,IAAE,EAAC,GAAG,EAC5DZ,WAAW,CAACa,OAAO;UAAA;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC,eACJvC,OAAA;YACEkC,SAAS,EAAC,eAAe;YACzBY,OAAO,EAAEA,CAAA,KAAMrB,uBAAuB,CAACO,WAAW,CAACC,EAAE,CAAE;YAAAE,QAAA,EACxD;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GAVDP,WAAW,CAACC,EAAE;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAWnB,CACN,CAAC,gBAEFvC,OAAA;UAAAmC,QAAA,EAAG;QAA6B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CACpC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA,eACN,CAAC,gBAEHvC,OAAA;MAAAmC,QAAA,EAAG;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG;EACzB;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACnC,EAAA,CA/FID,OAAO;AAAA4C,EAAA,GAAP5C,OAAO;AAiGb,eAAeA,OAAO;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}